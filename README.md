# ğŸ“– Schedule Project

## ğŸ’ ê°œìš”

Schedule ProjectëŠ” ìœ ì €ì •ë³´ë¥¼ ë“±ë¡ & ì¼ì •ì„ ì…ë ¥ë°›ì•„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì˜¨ ìš”ì²­ì„
ì²˜ë¦¬ í•´ì£¼ëŠ” ì„œë²„ ì…ë‹ˆë‹¤. ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë¡œê·¸ì¸í•œ ìœ ì €ë§Œ ì¼ì •ì„ ì‘ì„± ì¡°íšŒ ë“±,ëŒ“ê¸€ ì‘ì„±ì´ 
ê°€ëŠ¥í•©ë‹ˆë‹¤ 
---

## ìš”êµ¬ì‚¬í•­

## #ï¸âƒ£ ë„ì „

â¹ï¸ ì¼ì • ìƒì„±

- [ ]  ì¼ì •ì„ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [ ]  ì¼ì •ì€  í•„ë“œë¥¼ ê°€ì§‘ë‹ˆë‹¤. `ì‘ì„± ìœ ì €ëª…`, `í• ì¼ ì œëª©`, `í• ì¼ ë‚´ìš©`, `ì‘ì„±ì¼`, `ìˆ˜ì •ì¼` í•„ë“œ
- [ ]  `ì‘ì„±ì¼`, `ìˆ˜ì •ì¼` í•„ë“œëŠ” `JPA Auditing`ì„ í™œìš©

â¹ï¸ ìœ ì € ìƒì„±

- [ ]  ìœ ì €ë¥¼ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [ ]  ìœ ì €ëŠ” í•„ë“œë¥¼ ê°€ì§‘ë‹ˆë‹¤.
   `ìœ ì €ëª…`, `ì´ë©”ì¼`, `ì‘ì„±ì¼` , `ìˆ˜ì •ì¼` í•„ë“œ
- [ ]  `ì‘ì„±ì¼`, `ìˆ˜ì •ì¼` í•„ë“œëŠ” `JPA Auditing`ì„ í™œìš©í•©ë‹ˆë‹¤.
- [ ]  ì¼ì •ì€ ì´ì œ `ì‘ì„± ìœ ì €ëª…` í•„ë“œ ëŒ€ì‹  `ìœ ì € ê³ ìœ  ì‹ë³„ì` í•„ë“œë¥¼ ê°€ì§‘ë‹ˆë‹¤.

â¹ï¸ íšŒì›ê°€ì…

- [ ] ìœ ì €ì— ë¹„ë°€ë²ˆí˜¸ í•„ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

â¹ï¸ ë¡œê·¸ì¸

- [ ]  **Cookie/Session**ì„ í™œìš©í•´ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤. 
- [ ]  í•„í„°ë¥¼ í™œìš©í•´ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [ ]  `@Configuration` ì„ í™œìš©í•´ í•„í„°ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- [ ]  `ì´ë©”ì¼`ê³¼ `ë¹„ë°€ë²ˆí˜¸`ë¥¼ í™œìš©í•´ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
- [ ]  íšŒì›ê°€ì…, ë¡œê·¸ì¸ ìš”ì²­ì€ ì¸ì¦ ì²˜ë¦¬ì—ì„œ ì œì™¸í•©ë‹ˆë‹¤.

- [ ]  ë¡œê·¸ì¸ ì‹œ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ê²½ìš° HTTP Status code 401ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

## 2ï¸âƒ£ í•„ìˆ˜

â¹ï¸ ë‹¤ì–‘í•œ ì˜ˆì™¸ì²˜ë¦¬ ì ìš©

- [ ]  Validationì„ í™œìš©í•´ ë‹¤ì–‘í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì ìš©í•´ ë´…ë‹ˆë‹¤.
- [ ]  ì •í•´ì§„ ì˜ˆì™¸ì²˜ë¦¬ í•­ëª©ì´ ìˆëŠ”ê²ƒì´ ì•„ë‹Œ í”„ë¡œì íŠ¸ë¥¼ ë¶„ì„í•˜ê³  ì˜ˆì™¸ì‚¬í•­ì„ ì§€ì •í•´ ë´…ë‹ˆë‹¤.
- [ ]  Ex) í• ì¼ ì œëª©ì€ 10ê¸€ì ì´ë‚´, ìœ ì €ëª…ì€ 4ê¸€ì ì´ë‚´
- [ ]  `@Pattern`ì„ ì‚¬ìš©í•´ì„œ íšŒì› ê°€ì… Email ë°ì´í„° ê²€ì¦ ë“±
- [ ]  ì •ê·œí‘œí˜„ì‹ì„ ì ìš©

â¹ï¸ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”

- [ ]  ë¹„ë°€ë²ˆí˜¸ í•„ë“œì— ë“¤ì–´ê°€ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•©ë‹ˆë‹¤.

â¹ï¸ ëŒ“ê¸€ CRUD

- [ ]  ìƒì„±í•œ ì¼ì •ì— ëŒ“ê¸€ì„ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [ ]  ëŒ“ê¸€ê³¼ ì¼ì •ì€ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
- [ ]  ëŒ“ê¸€ì„ ì €ì¥, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [ ]  ëŒ“ê¸€ì€ í•„ë“œë¥¼ ê°€ì§‘ë‹ˆë‹¤. `ëŒ“ê¸€ ë‚´ìš©`, `ì‘ì„±ì¼`, `ìˆ˜ì •ì¼`, `ìœ ì € ê³ ìœ  ì‹ë³„ì`, `ì¼ì • ê³ ìœ  ì‹ë³„ì` í•„ë“œ
- [ ]  `ì‘ì„±ì¼`, `ìˆ˜ì •ì¼` í•„ë“œëŠ” `JPA Auditing`ì„ í™œìš©í•˜ì—¬ ì ìš©í•©ë‹ˆë‹¤.

â¹ï¸ ì¼ì • í˜ì´ì§• ì¡°íšŒ

- [ ]  ì¼ì •ì„ Spring Data JPAì˜ `Pageable`ê³¼ `Page` ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ í˜ì´ì§€ë„¤ì´ì…˜ì„ êµ¬í˜„
- [ ]  `í˜ì´ì§€ ë²ˆí˜¸`ì™€ `í˜ì´ì§€ í¬ê¸°`ë¥¼ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì—¬ ìš”ì²­í•˜ëŠ” í•­ëª©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- [ ]  `í• ì¼ ì œëª©`, `í• ì¼ ë‚´ìš©`, `ëŒ“ê¸€ ê°œìˆ˜`, `ì¼ì • ì‘ì„±ì¼`, `ì¼ì • ìˆ˜ì •ì¼`, `ì¼ì • ì‘ì„± ìœ ì €ëª…` í•„ë“œë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
- [ ]  ë””í´íŠ¸ `í˜ì´ì§€ í¬ê¸°`ëŠ” 10ìœ¼ë¡œ ì ìš©í•©ë‹ˆë‹¤.
- [ ]  ì¼ì •ì˜ `ìˆ˜ì •ì¼`ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•©ë‹ˆë‹¤.

## ğŸ’  ì£¼ìš” ê¸°ëŠ¥

- **íšŒì›ê°€ì…**

- **ë¡œê·¸ì¸ ì²´í¬**

- **ì¼ì • CRUD**

- **ëŒ“ê¸€ CRUD**

## ğŸ’  ê¸°ìˆ  ìŠ¤íƒ

- **ì–¸ì–´**: Java
- **DB**: MySql
- **ê°œë°œ íˆ´**: IntelliJ IDEA
- **í”„ë ˆì„ì›Œí¬**: Spring Boot
- **í¸ì˜ ê¸°ëŠ¥**: RomBok,Thymeleaf,Validation,Spring JPA,bcrypt(ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”)
## ğŸ’  API ëª…ì„¸ì„œ
ğŸ’ ì¼ì •

| ê¸°ëŠ¥ ì´ë¦„   | Method | Url                               | Request                                                                                    | Response | Status           |
|---------|--------|-----------------------------------|--------------------------------------------------------------------------------------------|----------|------------------|
| ì¼ì • ë“±ë¡   | POST   | /schedule/v1/schedule             | ìš”ì²­ body{"id":1,"title":"2ë²ˆ","content":"ë‚´ìš©ì…ë‹ˆë‹¤"}                                 | ë“±ë¡ ì •ë³´    | 200: ì •ìƒë“±ë¡ 400:ì˜¤ë¥˜        |    
| ì „ì²´ ì¼ì • ì¡°íšŒ | GET    | /schedule/v1/schedules            | ìš”ì²­ param    | ë‹¤ê±´ ì‘ë‹µ ì •ë³´ | 200: ì •ìƒì¡°íšŒ  400:ì˜¤ë¥˜       |
| í˜ì´ì§€ ì¡°íšŒ  | GET    | /v2/schedules?size=&page=         | ìš”ì²­ param                                                                                   | ë‹¤ê±´ ì‘ë‹µ ì •ë³´ | 200: ì •ìƒì¡°íšŒ 400:ì˜¤ë¥˜        |
| ì„ íƒ ì¼ì • ì—…ë°ì´íŠ¸ | PATCH  | /schedule/v1/schedule/{schedulesId} | ìš”ì²­ body{"title":"ìˆ˜ì •ì œëª©","content":"ìˆ˜ì •ë‚´ìš©"}                              | -        | 200: ì •ìƒìˆ˜ì • 400:ì˜¤ë¥˜       |
| ì„ íƒ ì¼ì • ì‚­ì œ | DELETE | /schedule/v1/schedule/{schedulesId} |                                                             | -        | 200: ì •ìƒì‚­ì œ 400:ì˜¤ë¥˜ |

ğŸ’ ìœ ì €

| ê¸°ëŠ¥ ì´ë¦„      | Method | Url                                 | Request                                                                                  | Response | Status           |
|------------|--------|-------------------------------------|------------------------------------------------------------------------------------------|----------|------------------|
| ìœ ì € ë“±ë¡      | POST | /user/v1/user                       | ìš”ì²­ body {"name":"wonju","email":"dnjs7469@naver.com","password":"1234"}                               | -        | 200: ì •ìƒë“±ë¡        |
| ì „ì²´ ìœ ì € ì¡°íšŒ   | GET    | /user/v1/users            | ìš”ì²­ param    | ë‹¤ê±´ ì‘ë‹µ ì •ë³´ | 200: ì •ìƒì¡°íšŒ  400:ì˜¤ë¥˜       |
| ì„ íƒ ì¼ì • ì—…ë°ì´íŠ¸ | PATCH  | /user/v1/user/{id} | ìš”ì²­ body{"name":"ìˆ˜ì •","email":"ìˆ˜ì •ë‚´ìš©"}                              | -        | 200: ì •ìƒìˆ˜ì • 400:ì˜¤ë¥˜       |
| ì„ íƒ ì¼ì • ì‚­ì œ   | DELETE | /user/v1/user/{id} |                                                             | -        | 200: ì •ìƒì‚­ì œ 400:ì˜¤ë¥˜ |

ğŸ’ ëŒ“ê¸€

| ê¸°ëŠ¥ ì´ë¦„      | Method | Url                                 | Request                                                                                    | Response | Status           |
|------------|--------|-------------------------------------|--------------------------------------------------------------------------------------------|----------|------------------|
| ëŒ“ê¸€ ë“±ë¡      | POST | /comment/v1/comment/{schedulesId}   | ìš”ì²­ body {"userName": "ì´ë¦„ì…ë ¥","userEmail": "ì´ë©”ì¼@google.com"}                                 | -        | 200: ì •ìƒë“±ë¡        |
| ì „ì²´ ëŒ“ê¸€ ì¡°íšŒ   | GET    | /comment/v1/comment            | ìš”ì²­ param    | ë‹¤ê±´ ì‘ë‹µ ì •ë³´ | 200: ì •ìƒì¡°íšŒ  400:ì˜¤ë¥˜       |
| ì„ íƒ ëŒ“ê¸€ ì—…ë°ì´íŠ¸ | PATCH  | /comment/v1/comment/{commentId}   | ìš”ì²­ body{"content":"ìˆ˜ì •ëŒ“ê¸€"}                              | -        | 200: ì •ìƒìˆ˜ì • 400:ì˜¤ë¥˜       |
| ì„ íƒ ëŒ“ê¸€ ì‚­ì œ   | DELETE | /comment/v1/comment/{commentId}     |                                                             | -        | 200: ì •ìƒì‚­ì œ 400:ì˜¤ë¥˜ |

ğŸ’ ë¡œê·¸ì¸

| ê¸°ëŠ¥ ì´ë¦„ | Method | Url     | Request                                                              | Response | Status           |
|-------|--------|---------|----------------------------------------------------------------------|----------|------------------|
| ë¡œê·¸ì¸   | POST | /login  | ìš”ì²­ body form-data {"password": "1234","userEmail": "ì´ë©”ì¼@google.com"} | -        | 200: ì •ìƒë“±ë¡        |
| ë¡œê·¸ì•„ì›ƒ  | GET    | /logout | | ë‹¤ê±´ ì‘ë‹µ ì •ë³´ | 200: ì •ìƒì¡°íšŒ  400:ì˜¤ë¥˜       |
| í™ˆì´ë™   | GET    | /home   |                                                            | ë‹¤ê±´ ì‘ë‹µ ì •ë³´ | 200: ì •ìƒì¡°íšŒ 400:ì˜¤ë¥˜        |


âœ…**RequestëŠ” PostMan Gitì— ToDoApp_Request ì°¸ê³ **

## ğŸ’  DB êµ¬ì¡°

![img.png](img.png)

## ì½”ë“œ ë¦¬ë·°

3. [ğŸ›  ì£¼ìš” ê¸°ëŠ¥](#-ì½”ë“œ-ìˆœ)
   - [Filter](#filter)
   - [Config](#config)
   - [Exception](#exception)
   - [Repository](#repository)
   - [Entity](#Entity)


- ## Filter


```java
public class LoginFilter implements Filter {

   private static final String[] WHITE_LIST = {"/", "/login","/favicon.ico","/user/*"};


   /**
    * WHITE_LISTì— ì €ì¥ëœ url ì œì™¸í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë¡œê·¸ì¸í•´ì•¼ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •
    *
    * @param servletRequest ìš”ì²­ ë‹¤ë£¨ê¸° ìœ„í•œ
    * @param servletResponse ì‘ë‹µ ë‹¤ë£¨ê¸° ìœ„í•œ
    * @param filterChain
    * @throws IOException
    * @throws ServletException
    */
   @Override
   public void doFilter(
           ServletRequest servletRequest,
           ServletResponse servletResponse,
           FilterChain filterChain) throws IOException, ServletException {

      HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;
      String requestURI = httpRequest.getRequestURI();
      HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;

      if (!isWhiteList(requestURI)) {

         HttpSession session = httpRequest.getSession(false);

         // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìì¸ ê²½ìš°
         if (session == null || session.getAttribute(Const.LOGIN_USER) == null) {
            httpResponse.sendRedirect("/login");
            return;// doFilter ì‹¤í–‰ x
         }

      }
      filterChain.doFilter(servletRequest, servletResponse);
   }

   private boolean isWhiteList(String requestURI) {

      return PatternMatchUtils.simpleMatch(WHITE_LIST, requestURI);
      
   }
```
ğŸ“– WHITE_LISTëŠ” ë¡œê·¸ì¸ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•  URLì„ ë„£ì–´ì¤€ë‹¤
ë§¤ê°œë³€ìˆ˜ > 
ServletRequest / ServletResponse: HTTP ìš”ì²­ ë° ì‘ë‹µì„ ë‹¤ë£¸, ì´ ë‘ê°œì˜
ì¸í„°í˜ì´ìŠ¤ëŠ” ê¸°ëŠ¥ì´ ë¶€ì¡±í•˜ì—¬ (HttpServletRequest)ê°™ì´ ë‹¤ìš´ ìºìŠ¤íŒ… í•˜ì—¬ ì‚¬ìš©í•œë‹¤
FilterChainì˜ doFilter ì‚¬ìš©í•´ ë‹¤ìŒ í•„í„°ë‚˜ ì„œë¸”ë ›ìœ¼ë¡œ ë„˜ê²¨ì¤€ë‹¤

getSession(false)ì´ë¯€ë¡œ ìƒˆë¡œìš´ ì„¸ì…˜ ìƒì„±x, ì„¸ì…˜ì´ ì—†ê±°ë‚˜ ì„¸ì…˜ì— ì €ì¥ëœ ìœ ì € ì •ë³´ê°€ nullì´ë©´ true
ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ì ê²½ìš° ë¡œê·¸ì¸í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¤ê³  returnìœ¼ë¡œ doFilter ì‹¤í–‰ë˜ì§€ì•Šê²Œ ì¢…ë£Œ

iswhiteListë©”ì†Œë“œëŠ” simpleMatchë©”ì†Œë“œ í™œìš©í•´ urlíŒ¨í„´ì„ ë¹„êµí•´ì¤€ë‹¤


- ## Config

ë§Œë“  Filter **Spring Bean**ìœ¼ë¡œ ë“±ë¡

```java
@Configuration
public class WebConfig {
   @Bean
   public FilterRegistrationBean loginFilter() {// ë¡œê·¸ì¸ í•„í„°ë“±ë¡
      FilterRegistrationBean<Filter> filterRegistrationBean = new FilterRegistrationBean<>();
      filterRegistrationBean.setFilter(new LoginFilter());//í•„í„° ì ìš©
      filterRegistrationBean.setOrder(1);//í•„í„°ì‹¤í–‰ìˆœì„œ
      filterRegistrationBean.addUrlPatterns("/*");//í•„í„°ì ìš©í•  URL ì§€ì • * ëŠ” ì „ë¶€

      return filterRegistrationBean;
   }
}
``` 
ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
```java
@Component
public class PasswordEncoder {

    public String encode(String rawPassword) {//ì•”í˜¸í™”í•´ì¤Œ
        return BCrypt.withDefaults().hashToString(BCrypt.MIN_COST, rawPassword.toCharArray());
    }

    public boolean matches(String rawPassword, String encodedPassword) {//ì…ë ¥í•œ ë¹„ë²ˆê³¼ ì•”í˜¸í™”í•œ ë¹„ë²ˆ ë¹„êµ
        BCrypt.Result result = BCrypt.verifyer().verify(rawPassword.toCharArray(), encodedPassword);
        return result.verified;
    }
}
```
encode()ëŠ” ë¹„ë²ˆ ì…ë ¥ë°›ê³  ì•”í˜¸í™”<br>
matches()ëŠ” ë¹„ë²ˆ ì…ë ¥ë°›ê³  ì•”í˜¸í™”í•œ ë¹„ë²ˆê³¼ ë¹„êµ

- ## Exception
í”„ë¡œì íŠ¸ ì „ì²´ Exception í•¸ë“¤ëŸ¬
```java
@ControllerAdvice
public class MyExceptionHandler {

   /**
    * ì—ëŸ¬ë‚´ìš©ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ìƒì„¸í•˜ê²Œ ë³´ë‚´ì¤Œ
    *
    * @param re ë©”ì‹œì§€ì™€ ì˜¤ë¥˜ í•„ë“œ ì•„ì´ë”” ê°€ì§€ê³ ìˆìŒ
    * @param hsr ìš”ì²­ URL ê°€ì ¸ì˜¤ê¸°ìœ„í•´
    * @return ì—ëŸ¬ì •ë³´ì™€ ì—ëŸ¬ì½”ë“œ ë³´ë‚´ì¤Œ
    */
   @ExceptionHandler(RuntimeCustomException.class)//ì…ë ¥ì´ ì˜ ëª»ëœ ê²½ìš° ì˜¤ë¥˜ í´ë¼ì´ì–¸íŠ¸ë¡œ
   public ResponseEntity<Map<String, Object>> runTimeCustomExceptionHandler(
           RuntimeCustomException re,
           HttpServletRequest hsr
   ) {
      Map<String, Object> errorMap = new HashMap<>();
      errorMap.put("timestamp", LocalDateTime.now());//í˜„ì¬ ì‹œê°„
      errorMap.put("status", HttpStatus.UNAUTHORIZED.value());// 401
      errorMap.put("error", HttpStatus.UNAUTHORIZED.toString());//"UNAUTHORIZED"
      errorMap.put("code", ErrorEnum.INPUT_MISS.getCode());//ì»¤ìŠ¤í…€ ì—ëŸ¬ì½”ë“œ
      errorMap.put("message", ErrorEnum.INPUT_MISS.getMessage());//ì»¤ìŠ¤í…€ ë©”ì‹œì§€
      errorMap.put("path", hsr.getRequestURI());
      errorMap.put("fieldErrors", new HashMap<>(Map.of("field", re.getErrorFieldName(), "message", re.getErrorMsg())));
      return new ResponseEntity<>(errorMap, HttpStatus.BAD_REQUEST);
   }

   /**
    *  ì—ëŸ¬ë‚´ìš©ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ìƒì„¸í•˜ê²Œ ë³´ë‚´ì¤Œ
    *
    * @param re ì—ëŸ¬ë©”ì‹œì§€ ë‹´ê³ ìˆìŒ
    * @param hsr hsr ìš”ì²­ URL ê°€ì ¸ì˜¤ê¸°ìœ„í•´
    * @return ì—ëŸ¬ì •ë³´ì™€ ì—ëŸ¬ì½”ë“œ ë³´ë‚´ì¤Œ
    */
   @ExceptionHandler(ResponseStatusException.class)
   public ResponseEntity<Map<String, Object>> responseStatusExceptionHandler(
           ResponseStatusException re,
           HttpServletRequest hsr) {
      Map<String, Object> errorMap = new HashMap<>();
      errorMap.put("timestamp", LocalDateTime.now());//í˜„ì¬ ì‹œê°„
      errorMap.put("status", HttpStatus.UNAUTHORIZED.value());// 401
      errorMap.put("error", HttpStatus.UNAUTHORIZED.toString());//"UNAUTHORIZED"
      errorMap.put("code", ErrorEnum.DATA_NOT_FOUNT);//ì»¤ìŠ¤í…€ ì—ëŸ¬ì½”ë“œ
      errorMap.put("message", ErrorEnum.DATA_NOT_FOUNT.getMessage());//ì»¤ìŠ¤í…€ ë©”ì‹œì§€
      errorMap.put("path", hsr.getRequestURI());

      return new ResponseEntity<>(errorMap, HttpStatus.BAD_REQUEST);
   }

   @ExceptionHandler(MethodArgumentNotValidException.class) //Controllerì˜ @Validì— ê±¸ë ¸ì„ ë•Œ ì˜¤ë¥˜ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ì£¼ëŠ” ë©”ì†Œë“œ
   public ResponseEntity<String> methodArgumentNotValidExceptionHandler(MethodArgumentNotValidException me) {
      return new ResponseEntity<>(me.getBindingResult().getFieldErrors().get(0).getDefaultMessage(), HttpStatus.BAD_REQUEST);
   }

   @ExceptionHandler(ConstraintViolationException.class) //@Validated ê±¸ë ¸ì„ ë•Œ ì˜¤ë¥˜ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ì£¼ëŠ” ë©”ì†Œë“œ
   public ResponseEntity<String> constraintViolationExceptionHandler(ConstraintViolationException me) {
      return new ResponseEntity<>(me.getConstraintViolations().iterator().next().getMessage(), HttpStatus.BAD_REQUEST);
   }
}

```
Mapì— ì˜¤ë¥˜ì •ë³´ë“¤ì„ ë‹´ì•„ì£¼ê³  ì—ëŸ¬ì½”ë“œì™€ í•¨ê»˜ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ì¤€ë‹¤

ğŸ’ ì»¤ìŠ¤í…€ Exception

```java
@Getter
@AllArgsConstructor
public class RuntimeCustomException extends RuntimeException{

    private String errorMsg;

    private String errorFieldName;

}
```
âœ… ì—ëŸ¬ë©”ì‹œì§€ì™€, ì˜¤ë¥˜ë‚œ í•„ë“œ ì•„ì´ë””ê°’ ê°™ì´ ë³´ë‚´ì¤Œ

*ğŸ’  Enum ì—ëŸ¬ ë©”ì‹œì§€ ë‹´ì€* 
```java
public enum ErrorEnum {//ì—ëŸ¬ì½”ë“œì™€ ë©”ì‹œì§€ ê´€ë¦¬ í•˜ëŠ” enum
    //C0** ì˜ëª»ëœ ì…ë ¥
    INPUT_MISS("C001", "ì˜ëª»ëœ ì…ë ¥ê°’ì…ë‹ˆë‹¤"),
    PASSWORD_MISS("C002", "ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼"),
    EMAIL_MISS("C003", "ì´ë©”ì¼ í‹€ë¦¼"),
    //N0** dbê´€ë ¨
    DATA_NOT_FOUNT("N001", "dbì— ê°’ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"),
    DATA_ALREADY("N002", "dbì— ê°’ì´ ì¡´ì¬í•©ë‹ˆë‹¤"),
    //L0** ë¡œê·¸ì¸ ì—ëŸ¬
    LOGIN_NOT("LO01", "ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”");

    private final String code;
    private final String message;

    ErrorEnum(String code, String message) {
        this.code = code;
        this.message = message;
    }

    public String getCode() {
        return code;
    }

    public String getMessage() {
        return message;
    }
}
```
âœ… ì»¤ìŠ¤í…€ ì—ëŸ¬ì½”ë“œì™€ ë©”ì‹œì§€ ë‹´ê³  ìˆìŒ ì—ëŸ¬ê´€ë¦¬ ìœ ì§€ë³´ìˆ˜ìš©
## Repository
```java
public interface CommentRepository extends JpaRepository<Comment, Long> {

   default Comment findByIdOrElseThrow(Long id) {
      return findById(id).orElseThrow(() -> new ResponseStatusException(
                      HttpStatus.NOT_FOUND,
                      ErrorEnum.DATA_NOT_FOUNT.getMessage()
              )
      );
   }
}
```
JPAí™œìš© JpaRepositoryìƒì†ë°›ê³  í•„ë“œëª…ë§Œ ë§ì¶°ì£¼ë©´ ìë™ìœ¼ë¡œ ì¿¼ë¦¬ ë§Œë“¤ì–´ì¤Œ
- ## Entity

```java
package com.example.schedule.entity;

import jakarta.persistence.*;
import lombok.Getter;

@Entity
@Getter
@Table(name = "comment")
public class Comment extends DateEntity {

   @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   private Long id;

   @Column(nullable = false)
   private String content;

   @ManyToOne
   @JoinColumn(name = "user_id")
   private User user;

   @ManyToOne
   @JoinColumn(name = "schedule_id")
   private Schedule schedule;


   public Comment(String content, User user, Schedule schedule) {
      this.content = content;
      this.user = user;
      this.schedule = schedule;
   }

   public Comment() {

   }
   public void setContent(String content) {
      this.content = content;
   }
}

```
@Entity í”„ë¡œì íŠ¸ ì‹¤í–‰ ì‹œ  ìë™ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±
@Table í…Œì´ë¸” ì´ë¦„ ì§€ì •
@Generatedvalue pk ìƒì„± ì „ëµì€ identity
@Colum ì»¬ëŸ¼ ì§€ì • nullable = false ë„ í—ˆìš© x
@ManyToOne N(comment)ã„·1(schedule) ê´€ê³„ commentëŠ” userì™€ schedule í…Œì´ë¸”ì— ì˜ì¡´
@JoinColum fk ìƒì„± 

ë‚ ì§œ 
```java
@Getter
@MappedSuperclass
@EntityListeners(AuditingEntityListener.class)
public abstract class DateEntity {

    @CreatedDate
    @Column(updatable = false)
    private LocalDateTime createdAt;

    @LastModifiedDate
    private LocalDateTime updatedAt;
}

```
ìë™ìœ¼ë¡œ ë‚ ì§œë³€ê²½ ì»¬ëŸ¼ì´ ë°”ë€”ë–„ë§ˆë‹¤ Listeners
updatable = false ì»¬ëŸ¼ ë³€ê²½ì´ ì¼ì–´ë‚˜ë„ ìµœì‹ í™” x